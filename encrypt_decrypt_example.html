<!DOCTYPE html>
<html>
<head lang="en">
    <script src="http://crypto-js.googlecode.com/svn/tags/3.1.2/build/components/core-min.js"></script>
    <script src="http://crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/pbkdf2.js"></script>
    <script src="http://crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/aes.js"></script>
    <script src="http://crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/sha512.js"></script>
    <script src="http://crypto-js.googlecode.com/svn/tags/3.1.2/build/components/pad-nopadding-min.js"></script>



    <meta charset="UTF-8">
    <title></title>
    <script>

        function decryptContainer(ciphertextBase64, password) {
            var salt = CryptoJS.enc.Utf8.parse('123-12-31-231-23-123-12-3123');
            var iv  = CryptoJS.enc.Utf8.parse('101112131415161718191a1b1c1d1e1f');
            var key = CryptoJS.PBKDF2(password, salt, {
                keySize: 256/32,
                iterations: 1000,
                hasher: CryptoJS.algo.SHA512
            });
            var cipherParams = CryptoJS.lib.CipherParams.create({
                ciphertext: CryptoJS.enc.Base64.parse(ciphertextBase64)
            });
            var decrypted = CryptoJS.AES.decrypt(
                    cipherParams,
                    key,
                    {
                        iv: iv,
                        mode: CryptoJS.mode.CBC,
                        padding: CryptoJS.pad.Pkcs7
                        //padding: CryptoJS.pad.NoPadding
                    });
            console.log(decrypted.toString(CryptoJS.enc.Utf8));
        }

        function sampleContainer(text, password) {
            var salt = CryptoJS.enc.Utf8.parse('123-12-31-231-23-123-12-3123');
            var iv  = CryptoJS.enc.Utf8.parse('101112131415161718191a1b1c1d1e1f');
            console.log('deriving key...');
            var key = CryptoJS.PBKDF2(password, salt, {
                keySize: 256/32,
                iterations: 1000,
                hasher: CryptoJS.algo.SHA512
            });

            console.log('base64 encrypted result:');
            var encrypted = CryptoJS.AES.encrypt(
                    text,
                    key,
                    {
                        iv: iv ,
                        mode: CryptoJS.mode.CBC,
                        padding: CryptoJS.pad.Pkcs7
                        //padding: CryptoJS.pad.NoPadding
                    });
            console.log(encrypted.ciphertext.toString(CryptoJS.enc.Base64));
        }

    </script>
</head>
<body>

</body>
</html>