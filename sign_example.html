<!DOCTYPE html>
<html>
<head lang="en">
    <style>
        input[type=text], textarea {
            width: 600px;
        }
        textarea {
            height: 150px;
        }
    </style>
    <meta charset="UTF-8">
    <title>Bitcoin Transaction Signer</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="sign_example.js"></script>
    <script>
        $(document).ready(function() {
            $('#submit').click(function() {
                var privateKeyWIF = $('#privateKeyWIF').val().trim()
                var txHex = $('#transactionHex').val().trim()
                key = BitcoinJs.ECKey.fromWIF(privateKeyWIF)
//                console.log("signing key address: " + key.pub.getAddress().toString())
                tx = BitcoinJs.Transaction.fromHex(txHex) // creating extra signatures here
                console.log(key)
                console.log(tx)
                var txb = BitcoinJs.TransactionBuilder.fromTransaction(tx)
                console.log(txb)
                txb.inputs[0].hashType = BitcoinJs.Transaction.SIGHASH_ALL
                txb.sign(0, key, txb.inputs[0].redeemScript, BitcoinJs.Transaction.SIGHASH_ALL)
                $('#result').val(txb.buildIncomplete().toHex())
            });

        });
    </script>
</head>
<body>
<div>private key hex:</div>
<input type="text" name="privateKeyWIF" id="privateKeyWIF" value="L1NCkTfLgduMYtLkXgVGgskYfPYkN23MCHDSukStcV8d1i1EwWjz">
<div>unsigned transaction:</div>
<textarea name="transactionHex" id="transactionHex">
01000000019c1c878eff34fb9262a02b8490fd0efb59bbd8b083170dc24ff10e99c742ffda03000000b3000000004cad532103832abbe9737befa67ea259fe06541c2585ba29462bc86f4fc67ac8235600984a2103dd0cc537865c5f04eadd58812b63a2fcf39fcb8158673ef794608af57ebd58c721029db58dbf054452422f0b51d68f93b8ff4160f2f7a44edc2a7f3103ec3d872e222102d89857b54f59b58726560c6de7db15c787fbd2b2bb0c0b615351366de96b91712103fc035bc6f1336c82ac1cb6d6928f3d21cf3c0610f577551b8d565a001297ab4b55aeffffffff04ac02000000000000475121030c28fe5f18c699a30b62b7d67de92b7493658f2bab2a1806fbf5f0ea7f28e8db21022ac1c2aa5600b2e8e68126945bf9ac83aa663357c8018fdea271a4886e2e2b6852ae22020000000000001976a914946cb2e08075bcbaf157e47bcb67eb2b2339d24288ac22020000000000001976a9149e0070a1aaa842e95f5fb4639d26802526c6304a88ac601100000000000017a9146d73e76d90cfdf438f6b394fb6ff8f08b6bf2d198700000000
</textarea>

<div>signed transaction:</div>
<textarea name="result" id="result">

</textarea>
<div>
    <input id="submit" type="button" value="Sign!">
</div>
</body>
</html>